var A=Object.defineProperty;var b=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var v=(t,e,a)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,B=(t,e)=>{for(var a in e||(e={}))N.call(e,a)&&v(t,a,e[a]);if(b)for(var a of b(e))V.call(e,a)&&v(t,a,e[a]);return t};import{I as $,a0 as C,r,ao as E,a3 as I,h as L,a4 as m,o as n,c as l,a as p,X as D,Q as u,L as k,V as h,W as c,a9 as F,R as S,S as H,P as f,U as w}from"../@vue/@vue.fb755038.js";import{M}from"../@element-plus/@element-plus.fb03e5a3.js";import{c as R,d as z,e as K,f as P,h as U}from"../index/index.b402fc8a.js";import{s as Q}from"../footer/footer.becc9f56.js";import{u as W}from"../vue-i18n/vue-i18n.6f01f2b2.js";import{u as X}from"../store/store.18269d15.js";import{_ as j}from"../../assets/index.c9112440.js";import{E as T}from"../element-plus/element-plus.7de12a9d.js";const q=$({name:"Search",setup(){const{t,locale:e}=W(),a=C({store:X(),switchDark:"",show:r({account:!1,blockHash:!1,blockHeight:!1,transaction:!1}),network:localStorage.getItem("network"),isTxt:r(!1),isShow:r(!0),dataAccount:r({address:"No Data"}),dataBlock:r({block_hash:"No Data"}),dataBlockHeight:r({height:"No Data"}),dataTransaction:r({hash:"No Data"}),dataVersion:r({}),input:r(""),icon:E({sc:M}),setSubstring:s=>{if(s!=null)return Q(s)},tipsTxt:s=>{a.isTxt=s},searchHash:()=>{a.isTxt=a.show.account=a.show.blockHash=a.show.blockHeight=a.show.transaction=!1;let s=a.input;if(s==""){a.isShow=!1,T.error("\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9");return}a.isShow=!0,s.length==66?(a.account(s),a.transaction(s,!1),a.block(s)):(a.version(s),a.height(s))},clearSearch:()=>{a.input="",a.isShow=!1},account:s=>{R({address:s}).then(o=>{if(console.log("Aaccount",o),o==""||o.status==500||o.status==400||o.status==404){a.show.account=!0;return}o!==""&&(a.dataAccount=o,a.show.account=!0)}).catch(o=>{console.log(o)})},block:s=>{z({id:s}).then(o=>{if(console.log("Block",o.status),o==""||o.status==500||o.status==400||o.status==404){a.show.blockHash=!0;return}o!==""&&(a.dataBlock=o,a.show.blockHash=!0)}).catch(o=>{console.log(o)})},height:s=>{K({height:s}).then(o=>{if(console.log("Block height",o),o==""||o.status==500||o.status==400||o.status==404){a.show.blockHeight=!0;return}o!==""&&(a.dataBlockHeight=o,a.show.blockHeight=!0)}).catch(o=>{console.log(o)})},transaction:(s,o)=>{P({hash:s}).then(i=>{if(console.log("Transaction",i),i==""||i.status==500||i.status==400||i.status==404){a.show.transaction=!0;return}i!==""&&(i.hash=o?s:a.input,a.dataTransaction=i,a.show.transaction=!0)}).catch(i=>{console.log(i)})},version:s=>{U({version:s}).then(o=>{console.log("version",o),a.dataVersion=o,o.txn_hash!=null&&a.transaction(o.txn_hash,!0)}).catch(o=>{console.log(o)})},closeSearchList:()=>{document.addEventListener("click",s=>{document.getElementById("search").contains(s.target)||a.clearSearch()})}}),y=I(a);return L(()=>{a.closeSearchList(),(a.network=="aptos_testnet"||a.network=="aptos_devnet")&&T({message:t("lang.Tips"),type:"warning"})}),B({},y)}}),G={class:"search",id:"search"},J={class:"mt-4"},O={class:"tips-txt"},Y={class:"sc-content"},Z={key:0},x=h(" Account: "),tt={key:0},at={key:1},ot=h(" Block: "),st={key:0},et={key:2},nt=h(" Block: "),it={key:0},rt={key:3},lt=h(" Transaction: "),ct={key:0};function ht(t,e,a,y,s,o){const i=m("el-button"),_=m("el-input"),g=m("router-link");return n(),l("div",G,[p("div",J,[D(_,{modelValue:t.input,"onUpdate:modelValue":e[1]||(e[1]=d=>t.input=d),size:"large",placeholder:t.$t("lang.SearchPlaceholder"),onKeyup:e[2]||(e[2]=F(d=>t.searchHash(),["enter","native"])),class:"input-with-select",clearable:"",onClear:e[3]||(e[3]=d=>t.clearSearch()),onFocus:e[4]||(e[4]=d=>t.tipsTxt(!0)),onBlur:e[5]||(e[5]=d=>t.tipsTxt(!1))},{append:u(()=>[D(i,{type:"primary",style:k(t.store.switchDark?"background: #2ef1a7":"background: #715cff"),icon:t.icon.sc,onClick:e[0]||(e[0]=d=>t.searchHash())},{default:u(()=>[h(c(t.$t("lang.Search")),1)]),_:1},8,["style","icon"])]),_:1},8,["modelValue","placeholder"]),p("div",O,[S(p("span",null,"Account Address / Txn Hash or Version / Block Height",512),[[H,t.isTxt]])]),S(p("div",Y,[t.show.account?(n(),l("div",Z,[x,t.dataAccount.address=="No Data"?(n(),l("span",tt,c(t.dataAccount.address),1)):(n(),f(g,{key:1,to:"/accountDetail?address="+t.dataAccount.address,style:k(t.isDark(t.store.switchDark))},{default:u(()=>[h(c(t.setSubstring(t.dataAccount.address)),1)]),_:1},8,["to","style"]))])):w("",!0),t.show.blockHash?(n(),l("div",at,[ot,t.dataBlock.block_hash=="No Data"?(n(),l("span",st,c(t.dataBlock.block_hash),1)):(n(),f(g,{key:1,to:"/blocksDetail?hash="+t.dataBlock.block_hash,style:k(t.isDark(t.store.switchDark))},{default:u(()=>[h(c(t.setSubstring(t.dataBlock.block_hash)),1)]),_:1},8,["to","style"]))])):w("",!0),t.show.blockHeight?(n(),l("div",et,[nt,t.dataBlockHeight.height=="No Data"?(n(),l("span",it,c(t.dataBlockHeight.height),1)):(n(),f(g,{key:1,to:"/blocksDetail?height="+t.dataBlockHeight.height,style:k(t.isDark(t.store.switchDark))},{default:u(()=>[h(c(t.dataBlockHeight.height),1)]),_:1},8,["to","style"]))])):w("",!0),t.show.transaction?(n(),l("div",rt,[lt,t.dataTransaction.hash=="No Data"?(n(),l("span",ct,c(t.dataTransaction.hash),1)):(n(),f(g,{key:1,to:"/transactionDetail?hash="+t.dataTransaction.hash+"&txn_type="+t.dataTransaction.txn_type,style:k(t.isDark(t.store.switchDark))},{default:u(()=>[h(c(t.setSubstring(t.dataTransaction.hash)),1)]),_:1},8,["to","style"]))])):w("",!0)],512),[[H,t.isShow]])])])}var bt=j(q,[["render",ht]]);export{bt as S};
